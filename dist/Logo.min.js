var LogoJS=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";var r=n(1);class i{constructor(e,t){this.reset(e,t)}reset(e,t){this.position=void 0!==e?e:new r.a(0,0,180),this.penDown=void 0===t||t}getCopy(){return{position:this.position,penDown:this.penDown}}move(e){let t=Math.PI*this.position.angle/180;return this.position=new r.a(this.position.x+e*Math.sin(t),this.position.y+e*Math.cos(t),this.position.angle),this.getCopy()}rotate(e){let t=this.position.angle+e;return this.position=new r.a(this.position.x,this.position.y,t),this.getCopy()}}t.a=new i},function(e,t,n){"use strict";class r{constructor(e,t,n){this.x=e,this.y=t,(n%=360)<0&&(n+=360),this.angle=n}}t.a=r},function(e,t,n){"use strict";class r{constructor(e,t){this.parameterSchema=e,this.execute=t}valid(e){return this.parameterSchema.length===e.length&&this.parameterSchema.every((t,n)=>t.validate(e[n]))}createExecution(e){if(this.valid(e))return{execute:()=>(e=e.map((e,t)=>this.parameterSchema[t].transform(e)),this.execute(...e))};throw new Error(`Invalid parameters: ${e}`)}}t.a=r},function(e,t,n){"use strict";class r{constructor(e,t){this.validate=e,this.transform=t}}const i=["forward","back","left","right","routine","startroutine","endroutine","repeat","endrepeat","up","down"];t.a={FINITE_NUMBER:new r(e=>isFinite(e),e=>parseFloat(e)),UP_DOWN:new r(e=>"up"===e||"down"===e,e=>e),NOT_KEYWORD:new r(e=>/^[a-z].*/.test(e)&&-1===i.indexOf(e),e=>e.toString())}},function(e,t,n){"use strict";function r(){i.a.reset(),a.a.reset()}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),a=n(5);t.default={reset:r,setPosition:function(e){return i.a.position=new o.a(e.x,e.y,e.angle),this},getPosition:function(){return i.a.position},execute:function(e){let t=[i.a.getCopy()],n=a.a.parse(e);return t=t.concat(n()),r(),t}}},function(e,t,n){"use strict";function r(){d=new l.a(null,1),w=d}function i(e){return e.split("\n").join(" ").split(" ")}function o(e,t){let n=t.splice(0,e.parameterSchema.length);return e.createExecution(n)}function a(e,t){let n=t.splice(0,e.parameterSchema.length);return e.createExecution(n)}function s(e,t){let n=t.splice(0,e.parameters.length);u(e.parseBody(n))}function u(e){for(;e.length>0;)I(e.shift(),e)}var c=n(2),p=n(6),h=n(3),l=n(7),f=n(8);let d,w,E,m={};const N={EXECUTING_COMMANDS:(e,t)=>{if(void 0!==_[e])o(_[e],t).execute();else if(void 0!==p.a[e])d.executions.push(a(p.a[e],t));else{if(void 0===m[e])throw new Error(`Control or Command not found: ${e}`);s(m[e],t)}},DEFINING_ROUTINE_PARAMETERS:(e,t)=>{"startroutine"!==e?E.parameters.push(e):I=N.DEFINING_ROUTINE_BODY},DEFINING_ROUTINE_BODY:(e,t)=>{"endroutine"!==e?E.body.push(e):(I=N.EXECUTING_COMMANDS,m[E.name]=E,E=void 0)}};let I=N.EXECUTING_COMMANDS,g=new c.a([h.a.NOT_KEYWORD],e=>{E=new f.a(e),I=N.DEFINING_ROUTINE_PARAMETERS}),v=new c.a([],()=>{throw new Error("startroutine called without routine")}),x=new c.a([],()=>{throw new Error("endroutine called without routine")}),_={repeat:new c.a([h.a.FINITE_NUMBER],e=>{let t=new l.a(d,e);d.executions.push(t),d=t}),endrepeat:new c.a([],()=>{if(null===d.parent)throw new Error("endrepeat called without matching repeat");d=d.parent}),routine:g,startroutine:v,endroutine:x};t.a={reset:function(){m={}},parse:function(e){if(r(),u(i(e)),d===w)return()=>w.execute();throw new Error("Unclosed repeat defined")}}},function(e,t,n){"use strict";var r=n(3),i=n(2),o=n(0);let a=new i.a([r.a.FINITE_NUMBER],e=>o.a.move(e)),s=new i.a([r.a.FINITE_NUMBER],e=>o.a.move(0-e)),u=new i.a([r.a.FINITE_NUMBER],e=>o.a.rotate(e)),c=new i.a([r.a.FINITE_NUMBER],e=>o.a.rotate(0-e)),p=new i.a([r.a.UP_DOWN],e=>(o.a.penDown="down"===e,o.a.getCopy()));t.a={forward:a,back:s,left:u,right:c,pen:p}},function(e,t,n){"use strict";class r{constructor(e,t){this.parent=e,this.frequency=t,this.executions=[]}execute(){let e=[];for(let t=0;t<this.frequency;t++)e=this.executions.reduce((e,t)=>{let n=t.execute();return Array.isArray(n)?e=e.concat(n):e.push(n),e},e);return e}}t.a=r},function(e,t,n){"use strict";class r{constructor(e){this.name=e,this.parameters=[],this.body=[]}createParameterValueMap(e){if(e.length===this.parameters.length)return this.parameters.reduce((t,n,r)=>(t[n]=e[r],t),{})}parseBody(e){let t=this.createParameterValueMap(e);return this.body.map(e=>void 0!==t[e]?t[e]:e)}}t.a=r}]).default;