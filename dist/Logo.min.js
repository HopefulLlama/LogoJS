var LogoJS=function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=10)}([function(t,e,r){"use strict";function n(t){return t.split("\n").join(" ").split(" ")}function a(t){for(;t.length>0;)o(t.shift(),t)}var s=r(1),i=(r(2),r(3));let o=i.a.EXECUTING_COMMANDS;e.a={reset:function(){i.a.routines={},o=i.a.EXECUTING_COMMANDS},parse:function(t){return s.a.instantiate(),a(n(t)),()=>s.a.execute()},setCurrentState:function(t){o=t},generateExecutions:a}},function(t,e,r){"use strict";var n=r(11);class a{constructor(){this.instantiate()}instantiate(){this.currentRepeat=new n.a(null,1),this.masterRepeat=this.currentRepeat}pushExecution(t){this.currentRepeat.executions.push(t)}pushNewRepeat(t){let e=new n.a(this.currentRepeat,t);this.pushExecution(e),this.currentRepeat=e}closeCurrentRepeat(){if(null===this.currentRepeat.parent)throw new Error("endrepeat called without matching repeat");this.currentRepeat=this.currentRepeat.parent}execute(){if(this.currentRepeat===this.masterRepeat)return this.masterRepeat.execute();throw new Error("Unclosed repeat defined")}}e.a=new a},function(t,e,r){"use strict";e.a={FORWARD:"forward",BACK:"back",LEFT:"left",RIGHT:"right",ROUTINE:"routine",STARTROUTINE:"startroutine",ENDROUTINE:"endroutine",REPEAT:"repeat",ENDREPEAT:"endrepeat",UP:"up",DOWN:"down"}},function(t,e,r){"use strict";function n(t,e){let r=e.splice(0,t.parameterSchema.length);return t.createExecution(r)}function a(t,e){let r=e.splice(0,t.parameterSchema.length);return t.createExecution(r)}function s(t,e){let r=e.splice(0,t.parameters.length);h.a.generateExecutions(t.parseBody(r))}var i=r(12),o=r(9),u=r(2),c=r(1),h=r(0),l=r(3);e.a={EXECUTING_COMMANDS:(t,e)=>{if(void 0!==i.a.control.getItem(t))n(i.a.control.getItem(t),e).execute();else if(void 0!==i.a.command.getItem(t))c.a.pushExecution(a(i.a.command.getItem(t),e));else{if(void 0===i.a.routine.getItem(t))throw new Error(`Control or Command not found: ${t}`);s(i.a.routine.getItem(t),e)}},DEFINING_ROUTINE_PARAMETERS:(t,e)=>{if(t===u.a.STARTROUTINE)h.a.setCurrentState(l.a.DEFINING_ROUTINE_BODY);else{if(-1!==Object.values(u.a).indexOf(t))throw new Error(`Keyword ${t} not allowed as routine parameter`);o.a.addParameter(t)}},DEFINING_ROUTINE_BODY:(t,e)=>{if(t===u.a.ENDROUTINE){h.a.setCurrentState(l.a.EXECUTING_COMMANDS);let t=o.a.generateRoutine();i.a.routine.setItem(t.name,t)}else o.a.addToBody(t)}}},function(t,e,r){"use strict";class n{constructor(){this.register={}}setItem(t,e){this.register[t]=e}getItem(t){return this.register[t]}getKeys(){return Object.keys(this.register)}}e.a=n},function(t,e,r){"use strict";var n=r(6);class a{constructor(t,e){this.reset(t,e)}reset(t,e){this.position=void 0!==t?t:new n.a(0,0,180),this.penDown=void 0===e||e}getCopy(){return{position:this.position,penDown:this.penDown}}move(t){let e=Math.PI*this.position.angle/180;return this.position=new n.a(this.position.x+t*Math.sin(e),this.position.y+t*Math.cos(e),this.position.angle),this.getCopy()}rotate(t){let e=this.position.angle+t;return this.position=new n.a(this.position.x,this.position.y,e),this.getCopy()}}e.a=new a},function(t,e,r){"use strict";class n{constructor(t,e,r){this.x=t,this.y=e,(r%=360)<0&&(r+=360),this.angle=r}}e.a=n},function(t,e,r){"use strict";var n=r(2);class a{constructor(t,e){this.validate=t,this.transform=e}}e.a={FINITE_NUMBER:new a(t=>isFinite(t),t=>parseFloat(t)),UP_DOWN:new a(t=>t===n.a.UP||t===n.a.DOWN,t=>t),NOT_KEYWORD:new a(t=>/^[a-z].*/.test(t)&&-1===Object.values(n.a).indexOf(t),t=>t.toString())}},function(t,e,r){"use strict";class n{constructor(t,e){this.parameterSchema=t,this.execute=e}valid(t){return this.parameterSchema.length===t.length&&this.parameterSchema.every((e,r)=>e.validate(t[r]))}createExecution(t){if(this.valid(t))return{execute:()=>(t=t.map((t,e)=>this.parameterSchema[e].transform(t)),this.execute(...t))};throw new Error(`Invalid parameters: ${t}`)}}e.a=n},function(t,e,r){"use strict";var n=r(15);let a,s,i;class o{constructor(){this.start()}start(){return a=null,s=[],i=[],this}setName(t){return a=t,this}addParameter(t){return s.push(t),this}addToBody(t){return i.push(t),this}generateRoutine(){let t=new n.a(a,s,i);return this.start(),t}}e.a=new o},function(t,e,r){"use strict";function n(){return a.a.reset(),i.a.reset(),this}Object.defineProperty(e,"__esModule",{value:!0});var a=r(5),s=r(6),i=r(0);e.default={reset:n,setPosition:function(t){return a.a.position=new s.a(t.x,t.y,t.angle),this},getPosition:function(){return a.a.position},execute:function(t){try{let e=[a.a.getCopy()],r=i.a.parse(t);return e=e.concat(r()),n(),e}catch(t){throw n(),t}}}},function(t,e,r){"use strict";class n{constructor(t,e){this.parent=t,this.frequency=e,this.executions=[]}execute(){let t=[];for(let e=0;e<this.frequency;e++)t=this.executions.reduce((t,e)=>{let r=e.execute();return Array.isArray(r)?t=t.concat(r):t.push(r),t},t);return t}}e.a=n},function(t,e,r){"use strict";var n=r(13),a=r(14),s=r(16);e.a={command:n.a,control:a.a,routine:s.a,getAllKeys:function(){return[...n.a.getKeys(),...a.a.getKeys(),...s.a.getKeys()]}}},function(t,e,r){"use strict";var n=r(7),a=r(8),s=r(5);let i=new(r(4).a);i.setItem("forward",new a.a([n.a.FINITE_NUMBER],t=>s.a.move(t))),i.setItem("back",new a.a([n.a.FINITE_NUMBER],t=>s.a.move(0-t))),i.setItem("left",new a.a([n.a.FINITE_NUMBER],t=>s.a.rotate(t))),i.setItem("right",new a.a([n.a.FINITE_NUMBER],t=>s.a.rotate(0-t))),i.setItem("pen",new a.a([n.a.UP_DOWN],t=>(s.a.penDown="down"===t,s.a.getCopy()))),e.a=i},function(t,e,r){"use strict";var n=r(7),a=r(8),s=r(3),i=r(0),o=r(1),u=r(4),c=r(9);let h=new u.a;h.setItem("routine",new a.a([n.a.NOT_KEYWORD],t=>{c.a.start(),c.a.setName(t),i.a.setCurrentState(s.a.DEFINING_ROUTINE_PARAMETERS)})),h.setItem("startroutine",new a.a([],()=>{throw new Error("startroutine called without routine")})),h.setItem("endroutine",new a.a([],()=>{throw new Error("endroutine called without routine")})),h.setItem("repeat",new a.a([n.a.FINITE_NUMBER],t=>{o.a.pushNewRepeat(t)})),h.setItem("endrepeat",new a.a([],()=>{o.a.closeCurrentRepeat()})),e.a=h},function(t,e,r){"use strict";function n(t,e){if(t.length===e.length)return e.reduce((e,r,n)=>(e[r]=t[n],e),{})}class a{constructor(t,e,r){this.name=t,this.parameters=e,this.body=r}parseBody(t){let e=n(t,this.parameters);return this.body.map(t=>void 0!==e[t]?e[t]:t)}}e.a=a},function(t,e,r){"use strict";var n=r(4);e.a=new n.a}]).default;