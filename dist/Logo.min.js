var LogoJS=function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,r){"use strict";var n=r(1);class a{constructor(e,t){this.reset(e,t)}reset(e,t){this.position=void 0!==e?e:new n.a(0,0,180),this.penDown=void 0===t||t}getCopy(){return{position:this.position,penDown:this.penDown}}move(e){let t=Math.PI*this.position.angle/180;return this.position=new n.a(this.position.x+e*Math.sin(t),this.position.y+e*Math.cos(t),this.position.angle),this.getCopy()}rotate(e){let t=this.position.angle+e;return this.position=new n.a(this.position.x,this.position.y,t),this.getCopy()}}t.a=new a},function(e,t,r){"use strict";class n{constructor(e,t,r){this.x=e,this.y=t,(r%=360)<0&&(r+=360),this.angle=r}}t.a=n},function(e,t,r){"use strict";class n{constructor(e,t){this.parameterSchema=e,this.execute=t}valid(e){return this.parameterSchema.length===e.length&&this.parameterSchema.every((t,r)=>t.validate(e[r]))}createExecution(e){if(this.valid(e))return{execute:()=>(e=e.map((e,t)=>this.parameterSchema[t].transform(e)),this.execute(...e))};throw new Error(`Invalid parameters: ${e}`)}}t.a=n},function(e,t,r){"use strict";class n{constructor(e,t){this.validate=e,this.transform=t}}const a=["forward","back","left","right","routine","startroutine","endroutine","repeat","endrepeat","up","down"];t.a={FINITE_NUMBER:new n(e=>isFinite(e),e=>parseFloat(e)),UP_DOWN:new n(e=>"up"===e||"down"===e,e=>e),NOT_KEYWORD:new n(e=>/^[a-z].*/.test(e)&&-1===a.indexOf(e),e=>e.toString())}},function(e,t,r){"use strict";class n{constructor(e,t){this.parent=e,this.frequency=t,this.executions=[]}execute(){let e=[];for(let t=0;t<this.frequency;t++)e=this.executions.reduce((e,t)=>{let r=t.execute();return Array.isArray(r)?e=e.concat(r):e.push(r),e},e);return e}}t.a=n},function(e,t,r){"use strict";function n(){a.a.reset(),s.a.reset()}Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),i=r(1),s=r(6);t.default={reset:n,setPosition:function(e){return a.a.position=new i.a(e.x,e.y,e.angle),this},getPosition:function(){return a.a.position},execute:function(e){let t=[a.a.getCopy()],r=s.a.parse(e);return t=t.concat(r()),n(),t}}},function(e,t,r){"use strict";function n(e){return e.split("\n").join(" ").split(" ")}function a(e,t){let r=t.splice(0,e.parameterSchema.length);return e.createExecution(r)}function i(e,t){let r=t.splice(0,e.parameterSchema.length);return e.createExecution(r)}function s(e,t){let r=t.splice(0,e.parameters.length);o(e.parseBody(r))}function o(e){for(;e.length>0;)E(e.shift(),e)}var u=r(2),c=r(7),p=r(3),h=(r(4),r(8)),l=r(9);let f,d={};const w={EXECUTING_COMMANDS:(e,t)=>{if(void 0!==x[e])a(x[e],t).execute();else if(void 0!==c.a[e])l.a.pushExecution(i(c.a[e],t));else{if(void 0===d[e])throw new Error(`Control or Command not found: ${e}`);s(d[e],t)}},DEFINING_ROUTINE_PARAMETERS:(e,t)=>{"startroutine"!==e?f.parameters.push(e):E=w.DEFINING_ROUTINE_BODY},DEFINING_ROUTINE_BODY:(e,t)=>{"endroutine"!==e?f.body.push(e):(E=w.EXECUTING_COMMANDS,d[f.name]=f,f=void 0)}};let E=w.EXECUTING_COMMANDS,m=new u.a([p.a.NOT_KEYWORD],e=>{f=new h.a(e),E=w.DEFINING_ROUTINE_PARAMETERS}),N=new u.a([],()=>{throw new Error("startroutine called without routine")}),R=new u.a([],()=>{throw new Error("endroutine called without routine")}),x={repeat:new u.a([p.a.FINITE_NUMBER],e=>{l.a.pushNewRepeat(e)}),endrepeat:new u.a([],()=>{l.a.closeCurrentRepeat()}),routine:m,startroutine:N,endroutine:R};t.a={reset:function(){d={}},parse:function(e){return l.a.instantiate(),o(n(e)),()=>l.a.execute()}}},function(e,t,r){"use strict";var n=r(3),a=r(2),i=r(0);let s=new a.a([n.a.FINITE_NUMBER],e=>i.a.move(e)),o=new a.a([n.a.FINITE_NUMBER],e=>i.a.move(0-e)),u=new a.a([n.a.FINITE_NUMBER],e=>i.a.rotate(e)),c=new a.a([n.a.FINITE_NUMBER],e=>i.a.rotate(0-e)),p=new a.a([n.a.UP_DOWN],e=>(i.a.penDown="down"===e,i.a.getCopy()));t.a={forward:s,back:o,left:u,right:c,pen:p}},function(e,t,r){"use strict";class n{constructor(e){this.name=e,this.parameters=[],this.body=[]}createParameterValueMap(e){if(e.length===this.parameters.length)return this.parameters.reduce((t,r,n)=>(t[r]=e[n],t),{})}parseBody(e){let t=this.createParameterValueMap(e);return this.body.map(e=>void 0!==t[e]?t[e]:e)}}t.a=n},function(e,t,r){"use strict";var n=r(4);class a{constructor(){this.instantiate()}instantiate(){this.currentRepeat=new n.a(null,1),this.masterRepeat=this.currentRepeat}pushExecution(e){this.currentRepeat.executions.push(e)}pushNewRepeat(e){let t=new n.a(this.currentRepeat,e);this.pushExecution(t),this.currentRepeat=t}closeCurrentRepeat(){if(null===this.currentRepeat.parent)throw new Error("endrepeat called without matching repeat");this.currentRepeat=this.currentRepeat.parent}execute(){if(this.currentRepeat===this.masterRepeat)return this.masterRepeat.execute();throw new Error("Unclosed repeat defined")}}t.a=new a}]).default;