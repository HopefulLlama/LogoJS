var LogoJS=function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,n){"use strict";function r(t){return t.split("\n").join(" ").split(" ")}function a(t){for(;t.length>0;)s(t.shift(),t)}var i=n(1),o=(n(2),n(3));let s=o.a.EXECUTING_COMMANDS;e.a={reset:function(){o.a.routines={},s=o.a.EXECUTING_COMMANDS},parse:function(t){return i.a.instantiate(),a(r(t)),()=>i.a.execute()},setCurrentState:function(t){s=t},generateExecutions:a}},function(t,e,n){"use strict";var r=n(9);class a{constructor(){this.instantiate()}instantiate(){this.currentRepeat=new r.a(null,1),this.masterRepeat=this.currentRepeat}pushExecution(t){this.currentRepeat.executions.push(t)}pushNewRepeat(t){let e=new r.a(this.currentRepeat,t);this.pushExecution(e),this.currentRepeat=e}closeCurrentRepeat(){if(null===this.currentRepeat.parent)throw new Error("endrepeat called without matching repeat");this.currentRepeat=this.currentRepeat.parent}execute(){if(this.currentRepeat===this.masterRepeat)return this.masterRepeat.execute();throw new Error("Unclosed repeat defined")}}e.a=new a},function(t,e,n){"use strict";e.a={FORWARD:"forward",BACK:"back",LEFT:"left",RIGHT:"right",ROUTINE:"routine",STARTROUTINE:"startroutine",ENDROUTINE:"endroutine",REPEAT:"repeat",ENDREPEAT:"endrepeat",UP:"up",DOWN:"down"}},function(t,e,n){"use strict";function r(t,e){let n=e.splice(0,t.parameterSchema.length);return t.createExecution(n)}function a(t,e){let n=e.splice(0,t.parameterSchema.length);return t.createExecution(n)}function i(t,e){let n=e.splice(0,t.parameters.length);h.a.generateExecutions(t.parseBody(n))}var o=n(10),s=n(11),u=n(2),c=n(1),h=n(0),p=n(3);let l={},f=null;e.a={EXECUTING_COMMANDS:(t,e)=>{if(void 0!==s.a[t])r(s.a[t],e).execute();else if(void 0!==o.a[t])c.a.pushExecution(a(o.a[t],e));else{if(void 0===l[t])throw new Error(`Control or Command not found: ${t}`);i(l[t],e)}},DEFINING_ROUTINE_PARAMETERS:(t,e)=>{if(t===u.a.STARTROUTINE)h.a.setCurrentState(p.a.DEFINING_ROUTINE_BODY);else{if(-1!==Object.values(u.a).indexOf(t))throw new Error(`Keyword ${t} not allowed as routine parameter`);f.parameters.push(t)}},DEFINING_ROUTINE_BODY:(t,e)=>{t===u.a.ENDROUTINE?(h.a.setCurrentState(p.a.EXECUTING_COMMANDS),l[f.name]=f,f=null):f.body.push(t)},getRoutines:function(){return l},setCurrentRoutineDefinition:function(t){f=t}}},function(t,e,n){"use strict";var r=n(5);class a{constructor(t,e){this.reset(t,e)}reset(t,e){this.position=void 0!==t?t:new r.a(0,0,180),this.penDown=void 0===e||e}getCopy(){return{position:this.position,penDown:this.penDown}}move(t){let e=Math.PI*this.position.angle/180;return this.position=new r.a(this.position.x+t*Math.sin(e),this.position.y+t*Math.cos(e),this.position.angle),this.getCopy()}rotate(t){let e=this.position.angle+t;return this.position=new r.a(this.position.x,this.position.y,e),this.getCopy()}}e.a=new a},function(t,e,n){"use strict";class r{constructor(t,e,n){this.x=t,this.y=e,(n%=360)<0&&(n+=360),this.angle=n}}e.a=r},function(t,e,n){"use strict";var r=n(2);class a{constructor(t,e){this.validate=t,this.transform=e}}e.a={FINITE_NUMBER:new a(t=>isFinite(t),t=>parseFloat(t)),UP_DOWN:new a(t=>t===r.a.UP||t===r.a.DOWN,t=>t),NOT_KEYWORD:new a(t=>/^[a-z].*/.test(t)&&-1===Object.values(r.a).indexOf(t),t=>t.toString())}},function(t,e,n){"use strict";class r{constructor(t,e){this.parameterSchema=t,this.execute=e}valid(t){return this.parameterSchema.length===t.length&&this.parameterSchema.every((e,n)=>e.validate(t[n]))}createExecution(t){if(this.valid(t))return{execute:()=>(t=t.map((t,e)=>this.parameterSchema[e].transform(t)),this.execute(...t))};throw new Error(`Invalid parameters: ${t}`)}}e.a=r},function(t,e,n){"use strict";function r(){return a.a.reset(),o.a.reset(),this}Object.defineProperty(e,"__esModule",{value:!0});var a=n(4),i=n(5),o=n(0);e.default={reset:r,setPosition:function(t){return a.a.position=new i.a(t.x,t.y,t.angle),this},getPosition:function(){return a.a.position},execute:function(t){try{let e=[a.a.getCopy()],n=o.a.parse(t);return e=e.concat(n()),r(),e}catch(t){throw r(),t}}}},function(t,e,n){"use strict";class r{constructor(t,e){this.parent=t,this.frequency=e,this.executions=[]}execute(){let t=[];for(let e=0;e<this.frequency;e++)t=this.executions.reduce((t,e)=>{let n=e.execute();return Array.isArray(n)?t=t.concat(n):t.push(n),t},t);return t}}e.a=r},function(t,e,n){"use strict";var r=n(6),a=n(7),i=n(4);let o=new a.a([r.a.FINITE_NUMBER],t=>i.a.move(t)),s=new a.a([r.a.FINITE_NUMBER],t=>i.a.move(0-t)),u=new a.a([r.a.FINITE_NUMBER],t=>i.a.rotate(t)),c=new a.a([r.a.FINITE_NUMBER],t=>i.a.rotate(0-t)),h=new a.a([r.a.UP_DOWN],t=>(i.a.penDown="down"===t,i.a.getCopy()));e.a={forward:o,back:s,left:u,right:c,pen:h}},function(t,e,n){"use strict";var r=n(6),a=n(7),i=n(3),o=n(0),s=n(12),u=n(1);let c=new a.a([r.a.NOT_KEYWORD],t=>{i.a.setCurrentRoutineDefinition(new s.a(t)),o.a.setCurrentState(i.a.DEFINING_ROUTINE_PARAMETERS)}),h=new a.a([],()=>{throw new Error("startroutine called without routine")}),p=new a.a([],()=>{throw new Error("endroutine called without routine")}),l=new a.a([r.a.FINITE_NUMBER],t=>{u.a.pushNewRepeat(t)}),f=new a.a([],()=>{u.a.closeCurrentRepeat()});e.a={repeat:l,endrepeat:f,routine:c,startroutine:h,endroutine:p}},function(t,e,n){"use strict";function r(t,e){if(t.length===e.length)return e.reduce((e,n,r)=>(e[n]=t[r],e),{})}class a{constructor(t){this.name=t,this.parameters=[],this.body=[]}parseBody(t){let e=r(t,this.parameters);return this.body.map(t=>void 0!==e[t]?e[t]:t)}}e.a=a}]).default;