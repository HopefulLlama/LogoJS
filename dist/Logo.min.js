var LogoJS=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";class r{constructor(e,t,n){this.x=e,this.y=t,(n%=360)<0&&(n+=360),this.angle=n}}t.a=r},function(e,t,n){"use strict";function r(){m=new h.a(null,1),N=m}function o(e){return e.split("\n").join(" ").split(" ")}function i(e,t){let n=t.splice(0,e.parameterSchema.length);return e.createExecution(n)}function a(e,t){let n=t.splice(0,e.parameterSchema.length);return e.createExecution(n)}function s(e,t){let n=t.splice(0,e.parameters.length);u(e.parseBody(n))}function u(e){for(;e.length>0;)_(e.shift(),e)}function c(){E=void 0,g={}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),p=n(3),h=n(4),f=n(5),d=n(0),w=n(6);let E,m,N,I,g={};const x={EXECUTING_COMMANDS:(e,t)=>{if(void 0!==M[e])i(M[e],t).execute();else if(void 0!==v[e])m.executions.push(a(v[e],t));else{if(void 0===g[e])throw new Error(`Control or Command not found: ${e}`);s(g[e],t)}},DEFINING_ROUTINE_PARAMETERS:(e,t)=>{"startroutine"!==e?I.parameters.push(e):_=x.DEFINING_ROUTINE_BODY},DEFINING_ROUTINE_BODY:(e,t)=>{"endroutine"!==e?I.body.push(e):(_=x.EXECUTING_COMMANDS,g[I.name]=I,I=void 0)}};let _=x.EXECUTING_COMMANDS,v={forward:new l.a([p.a.FINITE_NUMBER],e=>E.move(e)),back:new l.a([p.a.FINITE_NUMBER],e=>E.move(0-e)),left:new l.a([p.a.FINITE_NUMBER],e=>E.rotate(e)),right:new l.a([p.a.FINITE_NUMBER],e=>E.rotate(0-e)),pen:new l.a([p.a.UP_DOWN],e=>(E.penDown="down"===e,E.getCopy()))},y=new l.a([p.a.NOT_KEYWORD],e=>{I=new w.a(e),_=x.DEFINING_ROUTINE_PARAMETERS}),M=(new l.a([],()=>{throw new Error("startroutine called without routine")}),new l.a([],()=>{throw new Error("endroutine called without routine")}),{repeat:new l.a([p.a.FINITE_NUMBER],e=>{let t=new h.a(m,e);m.executions.push(t),m=t}),endrepeat:new l.a([],()=>{if(null===m.parent)throw new Error("endrepeat called without matching repeat");m=m.parent}),routine:y});t.default={reset:c,setPosition:function(e){return E=new f.a(new d.a(e.x,e.y,e.angle)),this},getPosition:function(){return void 0!==E?E.position:null},execute:function(e){void 0===E&&(E=new f.a(new d.a(0,0,180))),r(),u(o(e));let t=[{position:E.position,penDown:E.penDown}];if(m===N)return t.concat(N.execute()).filter(e=>null!==e);throw new Error("Unclosed repeat defined")}}},function(e,t,n){"use strict";class r{constructor(e,t){this.parameterSchema=e,this.execute=t}valid(e){return this.parameterSchema.length===e.length&&this.parameterSchema.every((t,n)=>t.validate(e[n]))}createExecution(e){if(this.valid(e))return{execute:()=>(e=e.map((e,t)=>this.parameterSchema[t].transform(e)),this.execute(...e))};throw new Error(`Invalid parameters: ${e}`)}}t.a=r},function(e,t,n){"use strict";class r{constructor(e,t){this.validate=e,this.transform=t}}const o=["forward","back","left","right","routine","startroutine","endroutine","repeat","endrepeat","up","down"];t.a={FINITE_NUMBER:new r(e=>isFinite(e),e=>parseFloat(e)),UP_DOWN:new r(e=>"up"===e||"down"===e,e=>e),NOT_KEYWORD:new r(e=>/^[a-z].*/.test(e)&&-1===o.indexOf(e),e=>e.toString())}},function(e,t,n){"use strict";class r{constructor(e,t){this.parent=e,this.frequency=t,this.executions=[]}execute(){let e=[];for(let t=0;t<this.frequency;t++)e=this.executions.reduce((e,t)=>{let n=t.execute();return Array.isArray(n)?e=e.concat(n):e.push(n),e},e);return e}}t.a=r},function(e,t,n){"use strict";var r=n(0);class o{constructor(e){this.position=e,this.penDown=!0}getCopy(){return{position:this.position,penDown:this.penDown}}move(e){let t=Math.PI*this.position.angle/180;return this.position=new r.a(this.position.x+e*Math.sin(t),this.position.y+e*Math.cos(t),this.position.angle),this.getCopy()}rotate(e){let t=this.position.angle+e;return this.position=new r.a(this.position.x,this.position.y,t),this.getCopy()}}t.a=o},function(e,t,n){"use strict";class r{constructor(e){this.name=e,this.parameters=[],this.body=[]}createParameterValueMap(e){if(e.length===this.parameters.length)return this.parameters.reduce((t,n,r)=>(t[n]=e[r],t),{})}parseBody(e){let t=this.createParameterValueMap(e);return this.body.map(e=>void 0!==t[e]?t[e]:e)}}t.a=r}]).default;